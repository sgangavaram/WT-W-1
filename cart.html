<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="cart.css">
</head>
<body>
    <div class="container">
        <h2>Shopping Cart</h2>
        <table>
            <thead>
                <tr>
                    <th>Book Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody id="cart-items">
            </tbody>
        </table>
        <div class="button-group">
            <a href="catalogue.html">Continue Shopping</a>
            <button id="checkout-btn">Checkout</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>

<script>
    document.addEventListener("DOMContentLoaded", function() {
    // Get cart items from local storage
    var cartItems = JSON.parse(localStorage.getItem("cart")) || [];

    // Get the table body where cart items will be displayed
    var cartTableBody = document.getElementById("cart-items");

    // Function to update the cart and display it
    function updateCart() {
        // Clear the existing cart display
        cartTableBody.innerHTML = "";

        // Iterate over cart items and add them to the table
        cartItems.forEach(function(item) {
            var row = document.createElement("tr");

            var nameCell = document.createElement("td");
            nameCell.textContent = item.name;
            row.appendChild(nameCell);

            var priceCell = document.createElement("td");
            priceCell.textContent = item.price;
            row.appendChild(priceCell);

            var quantityCell = document.createElement("td");
            quantityCell.textContent = item.quantity;
            row.appendChild(quantityCell);

            var totalCell = document.createElement("td");
            totalCell.textContent = item.price * item.quantity;
            row.appendChild(totalCell);

            cartTableBody.appendChild(row);
        });

        // Update local storage with the updated cart
        localStorage.setItem("cart", JSON.stringify(cartItems));
    }

    // Event listener for checkout button
    document.getElementById("checkout-btn").addEventListener("click", function() {
        alert("Implement checkout functionality here!");
        // You can add further functionality here, such as redirecting to a payment page
    });

    // Add event listeners to the "Add to Cart" buttons
    var addToCartButtons = document.querySelectorAll(".add-to-cart button");
    addToCartButtons.forEach(function(button) {
        button.addEventListener("click", function() {
            var bookName = this.parentNode.parentNode.querySelector(".book-details strong").textContent;
            var bookPrice = parseFloat(this.parentNode.previousElementSibling.textContent.replace("$", ""));
            
            // Check if the item already exists in the cart
            var existingItem = cartItems.find(function(item) {
                return item.name === bookName;
            });

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cartItems.push({
                    name: bookName,
                    price: bookPrice,
                    quantity: 1
                });
            }
            updateCart();
        });
    });
    updateCart();
});

</script>